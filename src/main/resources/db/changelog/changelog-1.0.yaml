databaseChangeLog:
  - changeSet:
      id: 1
      author: JakubPavlicek
      changes:

        # SEQUENCES

        - createSequence:
            sequenceName: movie_id_seq
            startValue: 1
            incrementBy: 1

        - createSequence:
            sequenceName: country_id_seq
            startValue: 1
            incrementBy: 1

        - createSequence:
            sequenceName: genre_id_seq
            startValue: 1
            incrementBy: 1

        - createSequence:
            sequenceName: director_id_seq
            startValue: 1
            incrementBy: 1

        - createSequence:
            sequenceName: actor_id_seq
            startValue: 1
            incrementBy: 1

        # TABLES

        - createTable:
            tableName: movie
            columns:
              - column:
                  name: id
                  type: bigint
                  defaultValueSequenceNext: movie_id_seq
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: movie_id
                  type: varchar(255)
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: name
                  type: varchar(100)
                  constraints:
                    nullable: false
              - column:
                  name: release
                  type: date
                  constraints:
                    nullable: false
              - column:
                  name: length
                  type: int
                  constraints:
                    nullable: false
              - column:
                  name: description
                  type: varchar(1000)
                  constraints:
                    nullable: false
              - column:
                  name: director_id
                  type: bigint
                  constraints:
                    nullable: true
                    foreignKeyName: fk_director

        - createTable:
            tableName: country
            columns:
              - column:
                  name: id
                  type: bigint
                  defaultValueSequenceNext: country_id_seq
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: varchar(15)
                  constraints:
                    nullable: false
                    unique: true

        - createTable:
            tableName: genre
            columns:
              - column:
                  name: id
                  type: bigint
                  defaultValueSequenceNext: genre_id_seq
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: varchar(15)
                  constraints:
                    nullable: false
                    unique: true

        - createTable:
            tableName: actor
            columns:
              - column:
                  name: id
                  type: bigint
                  defaultValueSequenceNext: actor_id_seq
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: varchar(50)
                  constraints:
                    nullable: false
                    unique: true

        - createTable:
            tableName: director
            columns:
              - column:
                  name: id
                  type: bigint
                  defaultValueSequenceNext: director_id_seq
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: varchar(50)
                  constraints:
                    nullable: false
                    unique: true

        # JOIN TABLES

        - createTable:
            tableName: movie_country
            columns:
              - column:
                  name: movie_id
                  type: bigint
                  constraints:
                    nullable: false
                    foreignKeyName: fk_movie
              - column:
                  name: country_id
                  type: bigint
                  constraints:
                    nullable: false
                    foreignKeyName: fk_country

        - createTable:
            tableName: movie_genre
            columns:
              - column:
                  name: movie_id
                  type: bigint
                  constraints:
                    nullable: false
                    foreignKeyName: fk_movie
              - column:
                  name: genre_id
                  type: bigint
                  constraints:
                    nullable: false
                    foreignKeyName: fk_genre

        - createTable:
            tableName: movie_actor
            columns:
              - column:
                  name: movie_id
                  type: bigint
                  constraints:
                    nullable: false
                    foreignKeyName: fk_movie
              - column:
                  name: actor_id
                  type: bigint
                  constraints:
                    nullable: false
                    foreignKeyName: fk_actor

        # FOREIGN KEYS

        - addForeignKeyConstraint:
            baseTableName: movie
            baseColumnNames: director_id
            constraintName: fk_director
            referencedTableName: director
            referencedColumnNames: id

        - addForeignKeyConstraint:
            baseTableName: movie_country
            baseColumnNames: movie_id
            constraintName: fk_movie
            referencedTableName: movie
            referencedColumnNames: id

        - addForeignKeyConstraint:
            baseTableName: movie_country
            baseColumnNames: country_id
            constraintName: fk_country
            referencedTableName: country
            referencedColumnNames: id

        - addForeignKeyConstraint:
            baseTableName: movie_genre
            baseColumnNames: movie_id
            constraintName: fk_movie
            referencedTableName: movie
            referencedColumnNames: id

        - addForeignKeyConstraint:
            baseTableName: movie_genre
            baseColumnNames: genre_id
            constraintName: fk_genre
            referencedTableName: genre
            referencedColumnNames: id

        - addForeignKeyConstraint:
            baseTableName: movie_actor
            baseColumnNames: movie_id
            constraintName: fk_movie
            referencedTableName: movie
            referencedColumnNames: id

        - addForeignKeyConstraint:
            baseTableName: movie_actor
            baseColumnNames: actor_id
            constraintName: fk_actor
            referencedTableName: actor
            referencedColumnNames: id

  # INSERT DATA

  - changeSet:
      id: 2
      author: JakubPavlicek
      changes:

        # INSERT GENRES

        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Action'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Adventure'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Animation'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Biography'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Comedy'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Crime'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Documentary'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Drama'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Family'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Fantasy'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Film-Noir'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'History'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Horror'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Music'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Musical'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Mystery'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Romance'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Sci-Fi'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Sport'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Superhero'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Thriller'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'War'
        - insert:
            tableName: genre
            columns:
              - column:
                  name: name
                  value: 'Western'

        # INSERT COUNTRIES

        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'United States'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Canada'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'United Kingdom'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Australia'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Germany'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'France'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Italy'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Spain'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Japan'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'China'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'India'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Brazil'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Russia'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Mexico'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'South Korea'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'South Africa'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Netherlands'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Sweden'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Norway'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Denmark'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Finland'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'New Zealand'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Argentina'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Belgium'
        - insert:
            tableName: country
            columns:
              - column:
                  name: name
                  value: 'Switzerland'